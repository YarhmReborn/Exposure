local keyURL = "https://pastebin.com/raw/zHsFNBFd"

local scriptURL = "https://raw.githubusercontent.com/JoystickpIays/psychic-octo-invention/main/Reborn"

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KeySystemGUI"
screenGui.ResetOnSpawn = false

local success, coreGui = pcall(function() return game:GetService("CoreGui") end)
if success and coreGui then
    screenGui.Parent = coreGui
else
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
end

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 360, 0, 200)
frame.Position = UDim2.new(0.5, -180, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Parent = screenGui

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 12)
uiCorner.Parent = frame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.Text = "Enter Your Key ðŸ”¥"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.BackgroundTransparency = 1
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 15
titleLabel.Parent = frame

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 7)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextScaled = true
closeButton.Parent = frame

local keyBox = Instance.new("TextBox")
keyBox.Size = UDim2.new(0, 280, 0, 40)
keyBox.Position = UDim2.new(0.5, -140, 0, 60)
keyBox.PlaceholderText = "Enter Key Here"
keyBox.TextColor3 = Color3.new(1, 1, 1)
keyBox.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
keyBox.Font = Enum.Font.SourceSans
keyBox.TextSize = 18
keyBox.ClearTextOnFocus = false
keyBox.Parent = frame

local uiCornerKeyBox = Instance.new("UICorner")
uiCornerKeyBox.CornerRadius = UDim.new(0, 8)
uiCornerKeyBox.Parent = keyBox

local checkKeyButton = Instance.new("TextButton")
checkKeyButton.Size = UDim2.new(0, 120, 0, 40)
checkKeyButton.Position = UDim2.new(0.5, -140, 0, 120)
checkKeyButton.Text = "Check Key"
checkKeyButton.TextColor3 = Color3.new(1, 1, 1)
checkKeyButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
checkKeyButton.Font = Enum.Font.SourceSansBold
checkKeyButton.TextSize = 18
checkKeyButton.Parent = frame

local uiCornerCheckButton = Instance.new("UICorner")
uiCornerCheckButton.CornerRadius = UDim.new(0, 8)
uiCornerCheckButton.Parent = checkKeyButton

local getKeyButton = Instance.new("TextButton")
getKeyButton.Size = UDim2.new(0, 120, 0, 40)
getKeyButton.Position = UDim2.new(0.5, 20, 0, 120)
getKeyButton.Text = "Get Key"
getKeyButton.TextColor3 = Color3.new(1, 1, 1)
getKeyButton.BackgroundColor3 = Color3.fromRGB(0, 85, 255)
getKeyButton.Font = Enum.Font.SourceSansBold
getKeyButton.TextSize = 18
getKeyButton.Parent = frame

local uiCornerGetButton = Instance.new("UICorner")
uiCornerGetButton.CornerRadius = UDim.new(0, 8)
uiCornerGetButton.Parent = getKeyButton

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

local function executeScript()
    local success, scriptToExecute = pcall(function()
        return game:HttpGet(scriptURL, true)
    end)

    if not success or not scriptToExecute or scriptToExecute == "" then
        game.StarterGui:SetCore("SendNotification", {
            Title = "Execution Error",
            Text = "Failed to fetch the script. Make sure the URL is correct and accessible.",
            Duration = 5
        })
        print("Error: Failed to fetch script from URL or script content is nil/empty.")
        return
    end

    local execSuccess, err = pcall(function()
        loadstring(scriptToExecute)()
    end)

    if not execSuccess then
        game.StarterGui:SetCore("SendNotification", {
            Title = "Execution Error",
            Text = "Error executing script: " .. err,
            Duration = 5
        })
        print("Execution Error: " .. err)
    end
end

checkKeyButton.MouseButton1Click:Connect(function()
    local success, fetchedKey = pcall(function()
        return game:HttpGet(keyURL, true)
    end)

    if success and fetchedKey and keyBox.Text == fetchedKey then
        executeScript()
        screenGui:Destroy()
    else
        game.StarterGui:SetCore("SendNotification", {
            Title = "Key System",
            Text = "Incorrect key entered!",
            Duration = 5
        })
    end
end)

getKeyButton.MouseButton1Click:Connect(function()
    if setclipboard then
        pcall(function()
            setclipboard("https://loot-link.com/s?ad8818e8")
        end)
    else
        game.StarterGui:SetCore("SendNotification", {
            Title = "Clipboard Error",
            Text = "Clipboard access not available in this environment.",
            Duration = 5
        })
    end

    wait(0.1)

    game.StarterGui:SetCore("SendNotification", {
        Title = "Key System",
        Text = "Link Copied | New Key Every Week",
        Duration = 5
    })
end)
